//plp gpc0007, gpc0009, gpc0026 wish
var countrycode=document.getElementsByTagName("html")[0].getAttribute("data-countrycode"),wishDataUrl=$("#wishDataUrl").val();function setWish(t){t={modelId:t};ajax.noCacheCall(wishDataUrl,t,"json",function(t){var i=0<$(".GPC0009").length,s=$("[data-wish-model-id="+t.modelId+"]");"L"==t.flag?(s.find("[data-wish-ico]").addClass("wishTarget"),$("#plp-wish-sign").modal("show"),i?$("#tempData").trigger("pdp_wish_no_signin"):$("#tempData").trigger("plp_wish_no_signin")):(isMobile&&0<$(".list-box").length&&$(".list-box").addClass("mobile-list"),0<$(".GPC0009").length?isMobile&&0<$(".pdp-sideInfo").length&&$(".pdp-sideInfo").addClass("mobile-sideInfo"):isMobile&&0<$(".pd-sideInfo").length&&$(".pd-sideInfo").addClass("mobile-sideInfo"),s.find("[data-wish-cnt]").text(t.wishCnt),"Y"==t.flag?(s.find("[data-is-wish-on]").addClass("on"),i?$("#tempData").trigger("pdp_wish_icon_select"):$("#tempData").trigger("plp_wish_icon_select")):(s.find("[data-is-wish-on]").removeClass("on"),i?$("#tempData").trigger("pdp_wish_icon_unselect"):$("#tempData").trigger("plp_wish_icon_unselect")),s.find("[data-wish-ico]").attr("aria-checked","Y"==t.flag?"true":"false"))})}$(document).on("click",".pd-fav .ico-fav",function(){"cn"==COUNTRY_CODE.toLowerCase()&&($(this).closest(".GPC0009").length?baiduTrackEvent("save_to_wishlist",$(this).closest(".GPC0009"),"PDP",{list_name:$lg_cggroup}):$(this).parents().find(".GPC0007").length&&baiduTrackEvent("save_to_wishlist",$(this).closest("li"),"PLP",{list_name:$lg_cggroup})),$("#v").val((new Date).getTime());var t=$(this),i=sessionStorage.getItem("ACCESS_TOKEN"),s="";0<$(".GPC0007").length||0<$(".GPC0026").length||0<$(".GPC0132").length?s=t.closest(".pd-sideInfo").find(".wish-inner").attr("data-product-id"):0<$(".GPC0009").length&&(s=t.closest(".pdp-sideInfo").find(".wish-inner").attr("data-product-id"));var e=$("[data-wish-model-id="+s+"]");i?e.find("[data-is-wish-on]").hasClass("on")&&isMobile?(0<$(".GPC0007").length||0<$(".GPC0026").length||0<$(".GPC0132").length?isMobile&&0<$(".pd-sideInfo").length&&$(".pd-sideInfo").addClass("mobile-sideInfo"):0<$(".GPC0009").length&&isMobile&&0<$(".pdp-sideInfo").length&&$(".pdp-sideInfo").addClass("mobile-sideInfo"),$("#plp-wish-count").attr("data-wish-count-product-id",s),$("#plp-wish-count").modal("show")):setWish(s):(t.addClass("wishTarget"),$("#plp-wish-sign").modal("show"))}),$(document).on("keyup , keydown",".pd-fav",function(t){"keyup"==t.type&&($(t.target).length<0?$(".pd-fav").removeClass("keyMove"):$(this).addClass("keyMove")),"keydown"==t.type&&(9!=t.keyCode||$(this).hasClass("on")&&"A"!=t.target.nodeName||$(".pd-fav").removeClass("keyMove"),t.shiftKey&&9==t.keyCode&&$(".pd-fav").removeClass("keyMove"))}),$(document).ready(function(){var t,i;(0<$(".GPC0007").length||0<$(".GPC0009").length||0<$(".GPC0026").length||0<$(".GPC0132").length)&&(isMobile&&0<$(".list-box").length&&$(".list-box").addClass("mobile-list"),isMobile&&0<$(".pdp-sideInfo").length&&$(".pdp-sideInfo").addClass("mobile-sideInfo")),$("#plp-wish-sign").on("hidden.bs.modal",function(t){$(".wishTarget").focus(),$(".ico-fav").removeClass("wishTarget")}),$("#plp-wish-count").on("hidden.bs.modal",function(t){$(".wishTarget").focus(),$(".ico-fav").removeClass("wishTarget"),$("#plp-wish-count").attr("data-wish-count-product-id","")}),$("#goWish").on("click",function(){location.href=$("#goWish").attr("data-go-wish-url")}),$("#wishRemove").on("click",function(){var t=$("#plp-wish-count").attr("data-wish-count-product-id");$("#plp-wish-count").attr("data-wish-count-product-id",""),setWish(t)}),$("#signIn").click(function(){var t=window.location.href;location.href="/"+countrycode+"/my-lg/login?state="+t}),0<!$("[data-wish-model-id]").length||(t=$("[data-wish-url]").eq(0).attr("data-wish-url"),i=[],$("[data-wish-model-id]").each(function(){i.push($(this).attr("data-wish-model-id"))}),0<i.length&&ajax.noCacheCall(t,{modelIds:i},"json",function(t){for(var i=t.wishList,s=0;s<i.length;s++){var e=i[s],a=e.modelId,o=e.wishCnt,e=e.isWishOn,a=$("[data-wish-model-id="+a+"]");a.find("[data-wish-cnt]").text(o),a.find("[data-is-wish-on]").removeClass("on").addClass(e)}}))});
//# sourceMappingURL=maps/wishlist.min.js.map
